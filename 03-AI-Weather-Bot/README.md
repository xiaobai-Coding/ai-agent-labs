# ğŸŒ¤ï¸ Weather Agent - å¤©æ°”æŸ¥è¯¢æ™ºèƒ½ä½“

> åŸºäº DeepSeek API + Function Calling çš„å¤©æ°”æŸ¥è¯¢æ™ºèƒ½åŠ©æ‰‹

---

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

**Weather Agent** æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ AI æ™ºèƒ½ä½“ï¼Œé›†æˆäº†å¤©æ°”æŸ¥è¯¢ã€æ•°å­¦è®¡ç®—ã€å•ä½è½¬æ¢ç­‰å¤šç§èƒ½åŠ›ã€‚å®ƒèƒ½å¤Ÿç†è§£è‡ªç„¶è¯­è¨€ä¸­çš„å¤©æ°”æŸ¥è¯¢éœ€æ±‚ï¼Œè‡ªåŠ¨è°ƒç”¨å¤©æ°”å·¥å…·è·å–å¤©æ°”ä¿¡æ¯ï¼Œå¹¶åŸºäºå¤©æ°”æ•°æ®ç”Ÿæˆç©¿è¡£å»ºè®®ã€å‡ºè¡Œå»ºè®®ç­‰ã€‚

### æ ¸å¿ƒèƒ½åŠ›

- âœ… **å¤©æ°”æŸ¥è¯¢**ï¼šæ”¯æŒæŸ¥è¯¢æŒ‡å®šåŸå¸‚å’Œæ—¥æœŸçš„å¤©æ°”ä¿¡æ¯
- âœ… **æ™ºèƒ½å»ºè®®**ï¼šåŸºäºå¤©æ°”æ•°æ®è‡ªåŠ¨ç”Ÿæˆç©¿è¡£ã€å‡ºè¡Œå»ºè®®
- âœ… **å¤šå·¥å…·åä½œ**ï¼šé›†æˆå¤©æ°”ã€è®¡ç®—å™¨ã€å•ä½è½¬æ¢ä¸‰ç§å·¥å…·
- âœ… **è‡ªç„¶è¯­è¨€ç†è§£**ï¼šç†è§£å„ç§å¤©æ°”æŸ¥è¯¢è¡¨è¾¾æ–¹å¼
- âœ… **è‡ªåŠ¨å·¥å…·è°ƒç”¨**ï¼šæ™ºèƒ½è¯†åˆ«éœ€æ±‚ï¼Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å·¥å…·
- âœ… **æµå¼è¾“å‡º**ï¼šæ”¯æŒ SSE æµå¼å“åº”ï¼Œæä¾›å®æ—¶æ‰“å­—æœºæ•ˆæœ
- âœ… **å·¥å…·ååˆ¶æœºåˆ¶**ï¼šå·¥å…·è°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨ä¿®å¤å‚æ•°å¹¶é‡è¯•
- âœ… **ä¸Šä¸‹æ–‡è®°å¿†**ï¼šæ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§

---

## ğŸ¯ åŠŸèƒ½æ¼”ç¤º

### å¤©æ°”æŸ¥è¯¢

```
ç”¨æˆ·: "æ˜å¤©é‡åº†å¤©æ°”å¦‚ä½•ï¼Ÿ"
AI: æ­£åœ¨æŸ¥è¯¢å¤©æ°”ä¿¡æ¯...
     ã€å¤©æ°”æŸ¥è¯¢ç»“æœã€‘
     åŸå¸‚: é‡åº†
     æ—¥æœŸ: æ˜å¤©
     å¤©æ°”: æ™´å¤©
     æ¸©åº¦: 25Â°C
     æ¹¿åº¦: 60%
     é£é€Ÿ: 10 km/h
     
     å»ºè®®ï¼šæ˜å¤©é‡åº†å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦é€‚å®œï¼Œé€‚åˆå¤–å‡ºæ´»åŠ¨ã€‚å»ºè®®ç©¿ç€è½»ä¾¿çš„è¡£ç‰©ã€‚

ç”¨æˆ·: "é‚£åŒ—äº¬ä»Šå¤©å¤©æ°”å‘¢ï¼Ÿ"
AI: æ­£åœ¨æŸ¥è¯¢å¤©æ°”ä¿¡æ¯...
     ã€å¤©æ°”æŸ¥è¯¢ç»“æœã€‘
     åŸå¸‚: åŒ—äº¬
     æ—¥æœŸ: ä»Šå¤©
     å¤©æ°”: å¤šäº‘
     æ¸©åº¦: 18Â°C
     ...
```

### å¤šå·¥å…·åä½œ

```
ç”¨æˆ·: "æ˜å¤©ä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿå¦‚æœæ¸©åº¦æ˜¯ 25 åº¦ï¼Œé‚£åæ°åº¦æ˜¯å¤šå°‘ï¼Ÿ"
AI: 1. æŸ¥è¯¢å¤©æ°” â†’ 25Â°C
    2. å•ä½è½¬æ¢ â†’ 25Â°C = 77Â°F
    ç»¼åˆå›å¤ï¼šæ˜å¤©ä¸Šæµ·å¤©æ°”...æ¸©åº¦ä¸º 25Â°Cï¼ˆ77Â°Fï¼‰...
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
VITE_AI_API_KEY=your_deepseek_api_key
VITE_AI_API_BASE_URL=https://api.deepseek.com
VITE_APP_TITLE=å¤©æ°”æŸ¥è¯¢æ™ºèƒ½åŠ©æ‰‹
VITE_APP_DEBUG=false
```

### è¿è¡Œé¡¹ç›®

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šVue 3 (Composition API)
- **æ„å»ºå·¥å…·**ï¼šVite
- **è¯­è¨€**ï¼šTypeScript
- **AI æœåŠ¡**ï¼šDeepSeek API
- **é€šä¿¡åè®®**ï¼šSSE (Server-Sent Events)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
03-AI-Weather-Bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatComponent.vue    # èŠå¤©ä¸»ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SSEDebugPanel.vue    # è°ƒè¯•é¢æ¿
â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ aiService.ts         # AI æœåŠ¡å°è£…
â”‚   â”œâ”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ chat.ts
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ tools.ts             # å·¥å…·å‡½æ•°å®šä¹‰ï¼ˆweather + calculator + unitConverterï¼‰
â”‚   â”‚   â”œâ”€â”€ utils.ts             # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ tips.ts              # æç¤ºè¯å·¥å…·
â”‚   â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts              # å…¥å£æ–‡ä»¶
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”œâ”€â”€ index.html               # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â””â”€â”€ package.json             # é¡¹ç›®é…ç½®
```

---

## ğŸ”§ å·¥å…·å®šä¹‰

### Weather Tool

**å·¥å…·åç§°**ï¼š`weatherTool`

**åŠŸèƒ½æè¿°**ï¼šç”¨äºæŸ¥è¯¢æŒ‡å®šåŸå¸‚å’Œæ—¥æœŸçš„å¤©æ°”ä¿¡æ¯ã€‚è¿”å›å¤©æ°”ç±»å‹ã€æ¸©åº¦ã€æ¹¿åº¦ã€é£é€Ÿç­‰æ•°æ®ã€‚

**å‚æ•°å®šä¹‰**ï¼š

```typescript
{
  city: string,    // åŸå¸‚åç§°
  date: string     // æ—¥æœŸï¼ˆä»Šå¤©ã€æ˜å¤©ã€åå¤©ç­‰ï¼‰
}
```

**è¿”å›æ•°æ®**ï¼š

```typescript
{
  city: string,           // åŸå¸‚åç§°
  date: string,           // æ—¥æœŸ
  weather: string,        // å¤©æ°”ç±»å‹ï¼ˆæ™´å¤©ã€å¤šäº‘ã€é›¨å¤©ç­‰ï¼‰
  temperature: number,    // æ¸©åº¦ï¼ˆæ‘„æ°åº¦ï¼‰
  humidity: number,       // æ¹¿åº¦ï¼ˆç™¾åˆ†æ¯”ï¼‰
  windSpeed: number       // é£é€Ÿï¼ˆkm/hï¼‰
}
```

**å·¥å…·å®ç°**ï¼š

```typescript
export const weatherTool = (params: { date: string; city: string }) => {
  if (!params.date || !params.city) {
    throw new Error("å¿…é¡»æä¾›æ—¥æœŸå’ŒåŸå¸‚å‚æ•°");
  }
  
  // ç”Ÿæˆæ¨¡æ‹Ÿå¤©æ°”æ•°æ®
  const weatherTypes = ["æ™´å¤©", "å¤šäº‘", "å°é›¨", "é˜´å¤©", "é›¾éœ¾"];
  const randomWeather = weatherTypes[Math.floor(Math.random() * weatherTypes.length)];
  const randomTemp = Math.floor(Math.random() * 20) + 15; // 15-35Â°C
  const randomHumidity = Math.floor(Math.random() * 40) + 40; // 40-80%
  const randomWindSpeed = Math.floor(Math.random() * 15) + 5; // 5-20 km/h
  
  return {
    city: params.city,
    date: params.date,
    weather: randomWeather,
    temperature: randomTemp,
    humidity: randomHumidity,
    windSpeed: randomWindSpeed
  };
};
```

> **æ³¨æ„**ï¼šå½“å‰ç‰ˆæœ¬ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ã€‚å¯ä»¥æ›¿æ¢ä¸ºçœŸå®çš„å¤©æ°” APIï¼ˆå¦‚ OpenWeatherMapã€å’Œé£å¤©æ°”ç­‰ï¼‰ã€‚

### Calculator Tool

æ”¯æŒå››åˆ™è¿ç®—ï¼Œå¯ç”¨äºè®¡ç®—æ¸©åº¦å·®å€¼ã€é£é€Ÿè½¬æ¢ç­‰åœºæ™¯ã€‚

### Unit Converter Tool

æ”¯æŒå•ä½è½¬æ¢ï¼Œå¯ç”¨äºæ¸©åº¦å•ä½è½¬æ¢ï¼ˆCâ†”Fï¼‰ç­‰åœºæ™¯ã€‚

---

## ğŸ§  Agent å·¥ä½œæµç¨‹

### å•å·¥å…·è°ƒç”¨æµç¨‹

1. **ç”¨æˆ·è¾“å…¥** â†’ è‡ªç„¶è¯­è¨€å¤©æ°”æŸ¥è¯¢
2. **LLM åˆ†æ** â†’ è¯†åˆ«æŸ¥è¯¢éœ€æ±‚ï¼Œæå–åŸå¸‚å’Œæ—¥æœŸ
3. **å·¥å…·è°ƒç”¨** â†’ è‡ªåŠ¨è°ƒç”¨ `weatherTool` å·¥å…·
4. **æ‰§è¡ŒæŸ¥è¯¢** â†’ å·¥å…·æ‰§è¡Œå¹¶è¿”å›å¤©æ°”æ•°æ®
5. **ç»“æœå¤„ç†** â†’ LLM å¤„ç†å·¥å…·ç»“æœï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›å¤ï¼ˆåŒ…å«å»ºè®®ï¼‰
6. **æµå¼è¾“å‡º** â†’ é€šè¿‡ SSE æµå¼è¿”å›ç»™ç”¨æˆ·

### å¤šå·¥å…·åä½œæµç¨‹

å½“ç”¨æˆ·éœ€æ±‚æ¶‰åŠå¤šä¸ªå·¥å…·æ—¶ï¼š

```
ç”¨æˆ·: "æ˜å¤©ä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿå¦‚æœæ¸©åº¦æ˜¯ 25 åº¦ï¼Œé‚£åæ°åº¦æ˜¯å¤šå°‘ï¼Ÿ"

1. LLM è¯†åˆ«éœ€è¦ä¸¤ä¸ªå·¥å…·ï¼š
   - weatherToolï¼ˆæŸ¥è¯¢å¤©æ°”ï¼‰
   - unitConverterï¼ˆæ¸©åº¦è½¬æ¢ï¼‰

2. ç¬¬ä¸€æ¬¡å·¥å…·è°ƒç”¨ï¼š
   - è°ƒç”¨ weatherTool â†’ è·å–æ¸©åº¦ 25Â°C

3. ç¬¬äºŒæ¬¡å·¥å…·è°ƒç”¨ï¼š
   - è°ƒç”¨ unitConverter â†’ 25Â°C â†’ 77Â°F

4. LLM ç»¼åˆä¸¤ä¸ªå·¥å…·çš„ç»“æœï¼Œç”Ÿæˆæœ€ç»ˆå›å¤
```

### å·¥å…·ååˆ¶æœºåˆ¶

å½“å·¥å…·è°ƒç”¨å¤±è´¥æ—¶ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€åŸå¸‚ä¸å­˜åœ¨ï¼‰ï¼š
1. æ•è·é”™è¯¯ä¿¡æ¯
2. å°†é”™è¯¯åé¦ˆç»™ LLM
3. LLM åˆ†æé”™è¯¯å¹¶ä¿®å¤å‚æ•°
4. è‡ªåŠ¨å‘èµ·ç¬¬äºŒæ¬¡å·¥å…·è°ƒç”¨

---

## ğŸ’¡ å¼€å‘è¯´æ˜

### é›†æˆçœŸå®å¤©æ°” API

å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå¯ä»¥æ›¿æ¢ä¸ºçœŸå® APIï¼š

1. å®‰è£…å¤©æ°” API SDK æˆ–ä½¿ç”¨ fetch è°ƒç”¨

```typescript
import axios from 'axios';

export const weatherTool = async (params: { date: string; city: string }) => {
  const response = await axios.get('https://api.openweathermap.org/data/2.5/weather', {
    params: {
      q: params.city,
      appid: process.env.VITE_WEATHER_API_KEY,
      units: 'metric'
    }
  });
  
  return {
    city: params.city,
    date: params.date,
    weather: response.data.weather[0].main,
    temperature: response.data.main.temp,
    humidity: response.data.main.humidity,
    windSpeed: response.data.wind.speed * 3.6 // m/s to km/h
  };
};
```

2. åœ¨ `.env.local` ä¸­æ·»åŠ  API Key

```env
VITE_WEATHER_API_KEY=your_weather_api_key
```

### æ·»åŠ æ–°çš„å·¥å…·

1. åœ¨ `src/utils/tools.ts` ä¸­å®šä¹‰å·¥å…·å‡½æ•°å’Œæè¿°
2. åœ¨ `src/services/aiService.ts` ä¸­æ³¨å†Œå·¥å…·åˆ° `functionDefinitions`
3. åœ¨ `availableFunctions` ä¸­æ³¨å†Œå·¥å…·æ‰§è¡Œå‡½æ•°

### è‡ªå®šä¹‰é…ç½®

ä¿®æ”¹ `src/services/aiService.ts` ä¸­çš„é…ç½®ï¼š

```typescript
const config = {
  model: "deepseek-chat",
  temperature: 0.3,
  max_tokens: 300
};
```

---

## ğŸ¨ ç‰¹æ€§äº®ç‚¹

### 1. æ™ºèƒ½å»ºè®®ç”Ÿæˆ

åŸºäºå¤©æ°”æ•°æ®è‡ªåŠ¨ç”Ÿæˆå»ºè®®ï¼š

- **æ¸©åº¦å»ºè®®**ï¼šæ ¹æ®æ¸©åº¦æ¨èç©¿è¡£
- **å¤©æ°”å»ºè®®**ï¼šæ ¹æ®å¤©æ°”ç±»å‹æ¨èæ˜¯å¦å¸¦ä¼
- **é£é€Ÿå»ºè®®**ï¼šæ ¹æ®é£é€Ÿæ¨èæ˜¯å¦é€‚åˆæˆ·å¤–æ´»åŠ¨

### 2. å¤šå·¥å…·æ— ç¼åä½œ

AI èƒ½å¤Ÿæ™ºèƒ½è¯†åˆ«éœ€è¦å¤šä¸ªå·¥å…·çš„åœºæ™¯ï¼Œè‡ªåŠ¨åè°ƒè°ƒç”¨ï¼š

- å¤©æ°”æŸ¥è¯¢ + å•ä½è½¬æ¢
- å¤©æ°”æŸ¥è¯¢ + æ•°å­¦è®¡ç®—
- å•ä½è½¬æ¢ + æ•°å­¦è®¡ç®—

### 3. è‡ªç„¶è¯­è¨€ç†è§£

AI èƒ½å¤Ÿç†è§£å„ç§è¡¨è¾¾æ–¹å¼ï¼š

- "æ˜å¤©é‡åº†å¤©æ°”å¦‚ä½•ï¼Ÿ"
- "å¸®æˆ‘æŸ¥ä¸€ä¸‹åŒ—äº¬ä»Šå¤©çš„å¤©æ°”"
- "ä¸Šæµ·åå¤©ä¼šä¸‹é›¨å—ï¼Ÿ"

### 4. ä¸Šä¸‹æ–‡è®°å¿†

æ”¯æŒå¤šè½®å¯¹è¯ï¼Œè®°ä½ä¹‹å‰çš„æŸ¥è¯¢ï¼š

```
ç”¨æˆ·: "æ˜å¤©ä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿ"
AI: ã€è¿”å›å¤©æ°”ä¿¡æ¯ã€‘

ç”¨æˆ·: "é‚£æ¸©åº¦æ˜¯å¤šå°‘ï¼Ÿ"
AI: ã€åŸºäºä¸Šä¸‹æ–‡ï¼ŒçŸ¥é“æ˜¯é—®ä¸Šæµ·çš„å¤©æ°”æ¸©åº¦ã€‘
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

- å½“å‰ç‰ˆæœ¬ä½¿ç”¨**æ¨¡æ‹Ÿå¤©æ°”æ•°æ®**ï¼Œæ¯æ¬¡æŸ¥è¯¢ç»“æœå¯èƒ½ä¸åŒ
- æ”¯æŒçš„åŸå¸‚åç§°éœ€è¦ç¬¦åˆå·¥å…·çš„å‚æ•°è¦æ±‚
- æ—¥æœŸæ”¯æŒï¼šä»Šå¤©ã€æ˜å¤©ã€åå¤©ç­‰è‡ªç„¶è¯­è¨€è¡¨è¾¾
- æ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¸Šä¸‹æ–‡ä¼šè‡ªåŠ¨ç»´æŠ¤
- å·¥å…·ä¼šè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·ç»„åˆ

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [DeepSeek API æ–‡æ¡£](https://platform.deepseek.com/api-docs/)
- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [Function Calling æŒ‡å—](https://platform.deepseek.com/api-docs/#function-calling)
- [OpenWeatherMap API](https://openweathermap.org/api)ï¼ˆå¯ç”¨äºé›†æˆçœŸå®å¤©æ°”æ•°æ®ï¼‰

---

## ğŸ“„ License

MIT License
